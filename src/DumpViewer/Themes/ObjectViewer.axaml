<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dv="using:DumpViewer">

    <Design.PreviewWith>
        <Border Padding="20" Background="#1E1E1E">
            <dv:ObjectViewer Value="Test String" />
        </Border>
    </Design.PreviewWith>

    <!-- Default layout resources (can be overridden in App.axaml) -->
    <Styles.Resources>
        <Thickness x:Key="ObjectViewerPadding">8</Thickness>
        <x:Double x:Key="ObjectViewerFontSize">13</x:Double>
        <Thickness x:Key="ObjectViewerItemSpacing">0,0,4,0</Thickness>
    </Styles.Resources>

    <!-- ObjectViewer template using TreeView -->
    <Style Selector="dv|ObjectViewer">
        <Setter Property="Template">
            <ControlTemplate>
                <Border Padding="{DynamicResource ObjectViewerPadding}" Background="#1E1E1E">
                    <TreeView ItemsSource="{Binding Items, RelativeSource={RelativeSource TemplatedParent}}"
                              Background="Transparent">
                        <TreeView.Styles>
                            <Style Selector="TreeViewItem" x:DataType="dv:ObjectNode">
                                <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                                <Setter Property="Foreground" Value="#D4D4D4"/>
                                <Setter Property="FontFamily" Value="Consolas, Monaco, 'Courier New', monospace"/>
                                <Setter Property="FontSize" Value="{DynamicResource ObjectViewerFontSize}"/>
                            </Style>
                        </TreeView.Styles>
                        <TreeView.ItemTemplate>
                            <TreeDataTemplate DataType="dv:ObjectNode" ItemsSource="{Binding Children}">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Property name -->
                                    <TextBlock Text="{Binding Name}"
                                               IsVisible="{Binding Name, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                               Foreground="#9CDCFE"
                                               Margin="{DynamicResource ObjectViewerItemSpacing}"/>
                                    
                                    <TextBlock Text=": "
                                               IsVisible="{Binding Name, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                               Foreground="#D4D4D4"/>
                                    
                                    <!-- Type name for complex types -->
                                    <TextBlock Text="{Binding TypeName}"
                                               IsVisible="{Binding HasChildren}"
                                               Foreground="#4EC9B0"
                                               Margin="{DynamicResource ObjectViewerItemSpacing}"/>
                                    
                                    <!-- Display value with color based on kind -->
                                    <TextBlock Text="{Binding DisplayValue}"
                                               Foreground="{Binding Kind, Converter={x:Static dv:NodeKindToBrushConverter.Instance}}"
                                               FontStyle="{Binding Kind, Converter={x:Static dv:NodeKindToFontStyleConverter.Instance}}"/>
                                </StackPanel>
                            </TreeDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </Border>
            </ControlTemplate>
        </Setter>
    </Style>
    
</Styles>
